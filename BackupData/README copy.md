# SSH è¿œç¨‹ç™»å½•é…ç½®æŒ‡å—
## ä¸€ã€å®‰å…¨è­¦å‘Šï¼ˆå¿…è¯»ï¼‰
> âš ï¸ ä»¥ä¸‹æ“ä½œæ¶‰åŠæœåŠ¡å™¨ root æƒé™åŠå¯†é’¥ç®¡ç†ï¼Œå­˜åœ¨æé«˜å®‰å…¨é£é™©ï¼Œè¯·åŠ¡å¿…éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š
1. å¼€å¯ Root è¿œç¨‹ç™»å½•éœ€é…åˆé˜²ç«å¢™ä¸¥æ ¼é™åˆ¶è®¿é—®æ¥æºï¼›
2. **æ¨èæ–¹æ¡ˆ**ï¼šä¼˜å…ˆåœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ï¼Œä»…å°†å…¬é’¥ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼ˆé¿å…åœ¨æœåŠ¡å™¨ç”Ÿæˆç§é’¥å¯¼è‡´æ³„éœ²é£é™©ï¼‰ï¼›
3. è„šæœ¬æ‰€åœ¨ GitHub/Gitee ä»“åº“éœ€è®¾ä¸ºç§æœ‰ï¼Œç¦æ­¢ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æœåŠ¡å™¨ IPã€å¯†ç ï¼‰ï¼›
4. æœåŠ¡å™¨ç”Ÿæˆçš„ç§é’¥ä¸‹è½½åï¼Œç«‹å³åˆ é™¤æœåŠ¡å™¨ç«¯çš„ç§é’¥æ–‡ä»¶ï¼›
5. æ‰€æœ‰è„šæœ¬æ“ä½œå¿…é¡»ä»¥ root æƒé™æ‰§è¡Œï¼Œå¦åˆ™ä¼šå¯¼è‡´é…ç½®å¤±æ•ˆã€‚

## äºŒã€åœ¨çº¿è„šæœ¬åœ°å€è½¬æ¢è§„åˆ™
### 1. GitHub åœ°å€è½¬æ¢
- åŸå§‹åœ°å€ç¤ºä¾‹ï¼š`https://github.com/ATX8T/OpenSSH-OpenSSL/blob/main/ssh_configure.sh`
- è½¬æ¢è§„åˆ™ï¼šåˆ é™¤ `/blob`ï¼Œå°† `https://github.com` æ›¿æ¢ä¸º `https://raw.githubusercontent.com`
- è½¬æ¢åç¤ºä¾‹ï¼š`https://raw.githubusercontent.com/ATX8T/OpenSSH-OpenSSL/main/ssh_configure.sh`

### 2. Gitee åœ°å€è½¬æ¢
- åŸå§‹åœ°å€ç¤ºä¾‹ï¼š`https://gitee.com/kaiyuankaifa/OpenSSHorSSL/blob/main/ssh_admin_toolkit.sh`
- è½¬æ¢è§„åˆ™ï¼šåˆ é™¤ `/blob`ï¼Œæ›¿æ¢ä¸º `/raw`ï¼ˆä¿ç•™åŸŸåï¼‰
- è½¬æ¢åç¤ºä¾‹ï¼š`https://gitee.com/kaiyuankaifa/OpenSSHorSSL/raw/main/ssh_admin_toolkit.sh`

> ğŸ’¡ è‹¥æœåŠ¡å™¨æ— æ³•è®¿é—® GitHubï¼Œå¯å°†è„šæœ¬åŒæ­¥è‡³ Gitee åä½¿ç”¨ Gitee åœ°å€ï¼ˆè®¿é—®é€Ÿåº¦æ›´å¿«ï¼‰ã€‚

## ä¸‰ã€è¿œç¨‹ç™»å½•å®ç°æ­¥éª¤
### 1. å‰ç½®æ£€æŸ¥
#### ï¼ˆ1ï¼‰ç½‘ç»œè¿é€šæ€§æµ‹è¯•
```bash
# æµ‹è¯• raw.githubusercontent.com è¿é€šæ€§ï¼ˆping ä¸é€šä¸ä»£è¡¨æ— æ³•è®¿é—®ï¼‰
ping -c 3 raw.githubusercontent.com

# æµ‹è¯• 443 ç«¯å£ï¼ˆHTTPS å¿…å¤‡ï¼‰- é€‰å…¶ä¸€å³å¯
telnet raw.githubusercontent.com 443
# æ—  telnet æ—¶ä½¿ç”¨ nc å‘½ä»¤
nc -zv raw.githubusercontent.com 443
```

#### ï¼ˆ2ï¼‰æƒé™æ£€æŸ¥
```bash
# ç¡®è®¤å½“å‰ç”¨æˆ·ä¸º root
whoami
# é root åˆ™åˆ‡æ¢
sudo -i
```

### 2. åœ¨çº¿è„šæœ¬ä½¿ç”¨æ–¹æ³•
#### ï¼ˆ1ï¼‰ç›´æ¥æ‰§è¡Œï¼ˆæ¨èï¼‰
```bash
# GitHub æº
bash <(curl -s https://raw.githubusercontent.com/ATX8T/OpenSSHorSSL/main/ssh_admin_toolkit.sh)

# Gitee æºï¼ˆè®¿é—®æ›´å¿«ï¼‰
bash <(curl -s https://gitee.com/kaiyuankaifa/OpenSSHorSSL/raw/main/ssh_admin_toolkit.sh)
```

#### ï¼ˆ2ï¼‰ä¸‹è½½åæ‰§è¡Œ
```bash
# ä¸‹è½½è„šæœ¬
curl -s -O https://gitee.com/kaiyuankaifa/OpenSSHorSSL/raw/main/ssh_admin_toolkit.sh

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x ssh_admin_toolkit.sh

# å¯åŠ¨äº¤äº’å¼èœå•
./ssh_admin_toolkit.sh
```

> âš ï¸ è„šæœ¬é»˜è®¤åˆ é™¤æ—§å¯†é’¥ï¼Œå¦‚éœ€ä¿ç•™å¤šå¯†é’¥ï¼Œéœ€å°†åŸæœ‰å…¬é’¥è¿½åŠ è‡³ `authorized_keys` æ–‡ä»¶ã€‚

### 3. Windows ç«¯è¿æ¥æœåŠ¡å™¨
#### ï¼ˆ1ï¼‰å¯†é’¥æ–‡ä»¶å‡†å¤‡
å°†æœåŠ¡å™¨ç”Ÿæˆçš„ç§é’¥ï¼ˆ`id_rsa`ï¼‰ä¸‹è½½è‡³ Windows æœ¬åœ°ï¼Œå­˜æ”¾è·¯å¾„ç¤ºä¾‹ï¼š  
`C:\Users\ä½ çš„ç”¨æˆ·å\.ssh\id_rsa`ï¼ˆæ— åç¼€åï¼‰

#### ï¼ˆ2ï¼‰SSH è¿æ¥å‘½ä»¤
```bash
# é€šç”¨æ ¼å¼
ssh -i "C:\è·¯å¾„\åˆ°\ç§é’¥æ–‡ä»¶\id_rsa" æœåŠ¡å™¨ç”¨æˆ·å@æœåŠ¡å™¨IP

# ç¤ºä¾‹
ssh -i "C:\IM\SSHä¸keyä¸æœåŠ¡å™¨è¯ä¹¦\æµ‹è¯•ç”¨\id_rsa" root@192.168.244.139
```
> ğŸ’¡ è·¯å¾„éœ€ä½¿ç”¨åŒå¼•å·åŒ…è£¹ï¼Œæ³¨æ„åæ–œæ  `\` ä¿ç•™ã€‚

## å››ã€å¯†é’¥ç®¡ç†æ ¸å¿ƒåŸç†
| å¯†é’¥ç±»å‹ | ä½œç”¨ | å­˜å‚¨ä½ç½® | å®‰å…¨è¦æ±‚ |
|----------|------|----------|----------|
| ç§é’¥ï¼ˆid_rsaï¼‰ | ç™»å½•è®¤è¯æ ¸å¿ƒ | Windows æœ¬åœ° | ä¸¥æ ¼ä¿å¯†ï¼Œç¦æ­¢æ³„éœ²/ä¸Šä¼ è‡³æœåŠ¡å™¨ |
| å…¬é’¥ï¼ˆid_rsa.pubï¼‰ | è®¤è¯æ ¡éªŒ | æœåŠ¡å™¨ `authorized_keys` | å¯å…¬å¼€ï¼Œéœ€ç¡®ä¿æ­£ç¡®è¿½åŠ è‡³é…ç½®æ–‡ä»¶ |

### å¯†é’¥ç”Ÿæˆæ–¹å¼å¯¹æ¯”
| ç”Ÿæˆä½ç½® | æ“ä½œæ­¥éª¤ | ä¼˜åŠ¿ |
|----------|----------|------|
| æœåŠ¡å™¨ç«¯ | ç”Ÿæˆåä¸‹è½½ç§é’¥ â†’ åˆ é™¤æœåŠ¡å™¨ç§é’¥ | æ“ä½œä¾¿æ· |
| æœ¬åœ°ç«¯ï¼ˆæ¨èï¼‰ | ç”Ÿæˆå¯†é’¥å¯¹ â†’ ä¸Šä¼ å…¬é’¥è‡³æœåŠ¡å™¨ â†’ è¿½åŠ è‡³ `authorized_keys` | å®‰å…¨æ€§æ›´é«˜ï¼ˆç§é’¥ä»æœªå‡ºç°åœ¨æœåŠ¡å™¨ï¼‰ |

## äº”ã€è„šæœ¬ä¼˜åŒ–ç‰¹æ€§ï¼ˆssh_admin_toolkit20.shï¼‰
> æ”¹è¿›ç‰ˆæœ¬ç¬¦åˆä¸“ä¸šå®‰å…¨æ ‡å‡†ï¼Œæ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š
- âœ… ä¸¥æ ¼çš„ shell é€‰é¡¹ï¼š`set -euo pipefail`ï¼ˆé˜²æ­¢è„šæœ¬é™é»˜å¤±è´¥ï¼‰
- âœ… å¼‚å¸¸å¤„ç†ï¼š`trap` æ•è· `ERR/EXIT/INT/TERM` ä¿¡å·
- âœ… è¾“å…¥éªŒè¯ï¼šæ‰€æœ‰ç”¨æˆ·è¾“å…¥å‡åšåˆæ³•æ€§æ ¡éªŒ
- âœ… æƒé™æ£€æŸ¥ï¼šè‡ªåŠ¨æ ¡éªŒæ–‡ä»¶/ç›®å½•æƒé™ï¼Œé¿å…é…ç½®å¤±æ•ˆ
- âœ… é…ç½®éªŒè¯ï¼šä¿®æ”¹ SSH é…ç½®å‰åå‡åšå®Œæ•´æ€§æ ¡éªŒ
- âœ… åŸå­æ“ä½œï¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ + `mv` é¿å…é…ç½®æ–‡ä»¶æŸå
- âœ… å®‰å…¨ sedï¼šè‡ªåŠ¨è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œé˜²æ­¢æ³¨å…¥
- âœ… å¤‡ä»½ç®¡ç†ï¼šåˆ›å»ºä¸“å±å¤‡ä»½ç›®å½•ï¼Œæ”¯æŒé…ç½®å›æ»š
- âœ… ä¸´æ—¶æ–‡ä»¶æ¸…ç†ï¼šé€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- âœ… æ—¥å¿—ä¼˜åŒ–ï¼šåŒºåˆ†æ ‡å‡†è¾“å‡º/é”™è¯¯è¾“å‡ºï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

## å…­ã€åŸºç¡€æ¦‚å¿µè¯´æ˜
| æœ¯è¯­ | å®šä¹‰ | å…³ç³» |
|------|------|------|
| SSH | ç½‘ç»œå®‰å…¨åè®® | å®šä¹‰åŠ å¯†è¿œç¨‹ç™»å½•/æ•°æ®ä¼ è¾“è§„èŒƒï¼ˆæ— å…·ä½“å®ç°ï¼‰ |
| OpenSSH | SSH åè®®å¼€æºå®ç° | ä¸»æµè½åœ°å·¥å…·ï¼ˆLinux è‡ªå¸¦ `ssh/sshd` å‘½ä»¤ï¼‰ |
| OpenSSL | åŠ å¯†ç®—æ³•åº“+å·¥å…·é›† | OpenSSH çš„åº•å±‚åŠ å¯†ä¾èµ– |

> ç®€å•æ€»ç»“ï¼šSSHï¼ˆåè®®æ ‡å‡†ï¼‰â†’ OpenSSHï¼ˆåè®®å®ç°ï¼‰â†’ OpenSSLï¼ˆåŠ å¯†å·¥å…·åº“ï¼‰

## ä¸ƒã€å›¾åºŠä½¿ç”¨è¯´æ˜
### 1. å›¾åºŠé“¾æ¥è§„åˆ™
- GitHub åŸå§‹é“¾æ¥ï¼š`https://raw.githubusercontent.com/ç”¨æˆ·å/ä»“åº“å/åˆ†æ”¯å/æ–‡ä»¶è·¯å¾„`
- Gitee åŸå§‹é“¾æ¥ï¼š`https://gitee.com/ç”¨æˆ·å/ä»“åº“å/raw/åˆ†æ”¯å/æ–‡ä»¶è·¯å¾„`
> â— æ³¨æ„ï¼šéœ€åˆ é™¤é“¾æ¥ä¸­çš„ `/blob`ï¼Œä¿ç•™ `/raw` æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚

### 2. ç¤ºä¾‹
```markdown
# GitHub å›¾åºŠ
![åœ¨GitHubä¸ŠåŒæ­¥](https://raw.githubusercontent.com/ATX8T/OpenSSHorSSL/main/ResourceInfo/jietu1.png)

# Gitee å›¾åºŠ
![åœ¨giteeä¸ŠåŒæ­¥](https://gitee.com/kaiyuankaifa/OpenSSHorSSL/raw/main/ResourceInfo/jietu1.png)
```

### 3. æ³¨æ„äº‹é¡¹
- Gitee å¤–é“¾ç¨³å®šæ€§è¾ƒå·®ï¼Œå¶å°”æ— æ³•æ˜¾ç¤ºï¼›
- æ¨èä¼˜å…ˆä½¿ç”¨ GitHub ä½œä¸ºå›¾åºŠï¼ˆéœ€ç¡®ä¿æœåŠ¡å™¨å¯è®¿é—®ï¼‰ã€‚

## å…«ã€ä»“åº“åŒæ­¥è¯´æ˜
1. åœ¨ VS Code ä¸­ç¼–å†™è„šæœ¬/æ–‡æ¡£ï¼›
2. é€šè¿‡ GitHub Desktop å°†å†…å®¹åŒæ­¥è‡³ GitHub ä»“åº“ï¼›
3. åœ¨ Gitee åå°åŒæ­¥ GitHub ä»“åº“å†…å®¹ï¼Œå®ç°åŒå¹³å°å¤‡ä»½ï¼›
4. åŒæ­¥å®Œæˆåï¼Œæ›´æ–°è„šæœ¬/å›¾åºŠçš„ Gitee åœ°å€ã€‚